#!/bin/bash
# ZiteBackJS - Comando Corto 'zb' para Unix/Linux/macOS
# Permite usar: zb -u https://example.com -w=5

# Obtener el directorio del script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Buscar ziteback.js en el directorio del script
if [ -f "$SCRIPT_DIR/ziteback.js" ]; then
    node "$SCRIPT_DIR/ziteback.js" "$@"
    exit $?
fi

# Verificar si Node.js est√° instalado
if ! command -v node &> /dev/null; then
    echo "‚ùå Error: Node.js no encontrado. Instalar desde https://nodejs.org/"
    exit 1
fi

# Buscar ziteback.js en PATH (instalaci√≥n global)
if command -v ziteback &> /dev/null; then
    ziteback "$@"
    exit $?
fi

# √öltimo intento: buscar en directorio com√∫n de npm global
NPM_PREFIX=$(npm config get prefix 2>/dev/null)
if [ -n "$NPM_PREFIX" ] && [ -f "$NPM_PREFIX/lib/node_modules/zitebackjs/ziteback.js" ]; then
    node "$NPM_PREFIX/lib/node_modules/zitebackjs/ziteback.js" "$@"
    exit $?
fi

# Si llegamos aqu√≠, no se encontr√≥ ziteback.js
echo "‚ùå Error: ziteback.js no encontrado"
echo "üí° Tip: Ejecutar desde el directorio de ZiteBackJS o instalar globalmente:"
echo "   npm install -g ."
echo "   O usar: node ziteback.js $@"
exit 1